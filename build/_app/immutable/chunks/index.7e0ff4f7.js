import{E as b,a4 as q,I as z,s as S,K as j,M as w}from"./index.37c432c9.js";const c=[];function g(e,u){return{subscribe:y(e,u).subscribe}}function y(e,u=b){let r;const n=new Set;function a(t){if(S(e,t)&&(e=t,r)){const o=!c.length;for(const s of n)s[1](),c.push(s,e);if(o){for(let s=0;s<c.length;s+=2)c[s][0](c[s+1]);c.length=0}}}function f(t){a(t(e))}function l(t,o=b){const s=[t,o];return n.add(s),n.size===1&&(r=u(a)||b),t(e),()=>{n.delete(s),n.size===0&&r&&(r(),r=null)}}return{set:a,update:f,subscribe:l}}function A(e,u,r){const n=!Array.isArray(e),a=n?[e]:e,f=u.length<2;return g(r,l=>{let t=!1;const o=[];let s=0,d=b;const _=()=>{if(s)return;d();const i=u(n?o[0]:o,l);f?l(i):d=j(i)?i:b},h=a.map((i,p)=>q(i,m=>{o[p]=m,s&=~(1<<p),t&&_()},()=>{s|=1<<p}));return t=!0,_(),function(){z(h),d(),t=!1}})}function M(e){return{subscribe:e.subscribe.bind(e)}}const x=Object.freeze(Object.defineProperty({__proto__:null,derived:A,get:w,readable:g,readonly:M,writable:y},Symbol.toStringTag,{value:"Module"}));export{A as d,g as r,x as s,y as w};
